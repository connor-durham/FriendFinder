<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Reservation Page</title>

  <!-- Latest compiled and minified CSS & JS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

</head>

<style>

body {
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    font-size: 14px;
    line-height: 1.42857143;
    color: #333;
    background-color: #fff
}

h2 {
    font-family: inherit;
    font-weight: 500;
    line-height: 1.1;
    color: inherit;
    margin-top: 20px;
    margin-bottom: 10px
}

h4, h3 {
    margin-top: 10px;
    margin-bottom: 10px;
}

.dropdowns {
    width: 30%;
}

#submit {
    margin-top: 30px;
    margin-bottom: 30px;
}

</style>


<body>

  <div class="container">

    <h2 id="h2s">Survey Questions</h2>

    <hr>

    <h3>About You</h3>

    <h4>Name (Required)</h4>

    <input type="text" id="name" class="form-control" required="">

    <h4>Link to Photo Image (Required)</h4>

    <input type="text" id="photo" class="form-control" required="">

    <hr>

    <div>
        <h3><strong>Question 1</strong></h3>

        <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>


            <select class="form-control dropdowns" id="question1">
                <option value="1">One</option>
                <option value="2">Two</option>
                <option value="3">Three</option>
                <option value="4">Four</option>
                <option value="5">Five</option>
            </select>
    </div>  

    <div>
        <h3><strong>Question 2</strong></h3>

        <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>


            <select class="form-control dropdowns" id="question2">
                <option value="1">One</option>
                <option value="2">Two</option>
                <option value="3">Three</option>
                <option value="4">Four</option>
                <option value="5">Five</option>
            </select>
    </div>  

    <div>
        <h3><strong>Question 3</strong></h3>

        <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>


            <select class="form-control dropdowns" id="question3">
                <option value="1">One</option>
                <option value="2">Two</option>
                <option value="3">Three</option>
                <option value="4">Four</option>
                <option value="5">Five</option>
            </select>
    </div>  

    <div>
        <h3><strong>Question 4</strong></h3>

        <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>


            <select class="form-control dropdowns" id="question4">
                <option value="1">One</option>
                <option value="2">Two</option>
                <option value="3">Three</option>
                <option value="4">Four</option>
                <option value="5">Five</option>
            </select>
    </div>  

    <div>
        <h3><strong>Question 5</strong></h3>

        <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>


            <select class="form-control dropdowns" id="question5">
                <option value="1">One</option>
                <option value="2">Two</option>
                <option value="3">Three</option>
                <option value="4">Four</option>
                <option value="5">Five</option>
            </select>
    </div>  

    <div>
        <h3><strong>Question 6</strong></h3>

        <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>


            <select class="form-control dropdowns" id="question6">
                <option value="1">One</option>
                <option value="2">Two</option>
                <option value="3">Three</option>
                <option value="4">Four</option>
                <option value="5">Five</option>
            </select>
    </div>  

    <div>
        <h3><strong>Question 7</strong></h3>

        <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>


            <select class="form-control dropdowns" id="question7">
                <option value="1">One</option>
                <option value="2">Two</option>
                <option value="3">Three</option>
                <option value="4">Four</option>
                <option value="5">Five</option>
            </select>
    </div>  

    <div>
        <h3><strong>Question 8</strong></h3>

        <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>


            <select class="form-control dropdowns" id="question8">
                <option value="1">One</option>
                <option value="2">Two</option>
                <option value="3">Three</option>
                <option value="4">Four</option>
                <option value="5">Five</option>
            </select>
    </div>  

    <div>
        <h3><strong>Question 9</strong></h3>

        <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>


            <select class="form-control dropdowns" id="question9">
                <option value="1">One</option>
                <option value="2">Two</option>
                <option value="3">Three</option>
                <option value="4">Four</option>
                <option value="5">Five</option>
            </select>
    </div>  

    <div>
        <h3><strong>Question 10</strong></h3>

        <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>


            <select class="form-control dropdowns" id="question10">
                <option value="1">One</option>
                <option value="2">Two</option>
                <option value="3">Three</option>
                <option value="4">Four</option>
                <option value="5">Five</option>
            </select>
    </div>  


    <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i>
        Submit</button>

        <hr>

    
      <div class="container">
                <p><a href="/api/friends">Friend List (API)</a>
      </div>
    </footer>

    <div id="modal1" class="modal">
        <div class="modal-content">
            <h4>Meet Your New BFF</h4>
            <h5 id="matchName"></h5>
            <img id="matchPic" src=""  width = 300px>
        </div>
            <div class="modal-footer">
            <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Done</a>
        </div>
    </div>

  </div>

</body>

</html>

<script type="text/javascript">

  $("#submit").on("click", function(event) {
    

    var newFriend = {
    	        name: $("#name").val().trim(),
				photo: $("#photo").val().trim(),
				scores: [
					$("#question1").val(),
					$("#question2").val(),
					$("#question3").val(),
					$("#question4").val(),
					$("#question5").val(),
					$("#question6").val(),
					$("#question7").val(),
					$("#question8").val(),
					$("#question9").val(),
					$("#question10").val()
				]
    };

    console.log(newFriend);

    let currentURL = window.location.origin;


    $.post(currentURL + "/api/friends", newFriend, function(data) {

        if (data) {

            $("#matchName").text(data.name);
            $("#matchPic").attr("src", data.profilePic);
            
            $('.modal').modal();

        }




        else {
          alert("You have not completed the form");
        }


        $("#name").val("");
        $("#photo").val("");
        $("#question1").val(""),
        $("#question2").val(""),
        $("#question3").val(""),
        $("#question4").val(""),
        $("#question5").val(""),
        $("#question6").val(""),
        $("#question7").val(""),
        $("#question8").val(""),
        $("#question9").val(""),
        $("#question10").val("")


      });

  });

</script>
